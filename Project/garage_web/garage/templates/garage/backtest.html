<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>auto</title>

    <!-- Font Awesome Icons -->
    {% load staticfiles %}
    <link href="{% static 'garage/vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic'
          rel='stylesheet' type='text/css'>

    <!-- Plugin CSS -->
    <link href="{% static 'garage/vendor/magnific-popup/magnific-popup.css' %}" rel="stylesheet">

    <!-- Theme CSS - Includes Bootstrap -->
    <link href="{% static 'garage/css/creative.css' %}" rel="stylesheet">


    <style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  color: black;
}

    </style>

<!--    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>-->
<!--    <script>-->


<!--    var config = {-->
<!--      type: 'line',-->
<!--      data: {-->
<!--        datasets: [{-->
<!--          data: {{ data|safe }},-->
<!--          label: 'BTCUSTD Closing Price',-->
<!--          backgroundColor: 'rgba(0,0,0,0)',-->
<!--          borderColor: 'pink',-->
<!--        }],-->
<!--        labels:{{ labels|safe }},-->
<!--      },-->
<!--      options: {-->
<!--        responsive: true,-->
<!--        scales: {-->
<!--            yAxes: [{-->
<!--                ticks: {-->
<!--                    beginAtZero: false,-->
<!--                },-->
<!--                gridLines: {-->
<!--                    color : "blue",-->
<!--                },-->
<!--            }],-->

<!--        },-->


<!--      },-->
<!--    };-->

<!--    window.onload = function() {-->
<!--      var ctx = document.getElementById('line-chart').getContext('2d');-->
<!--      window.myPie = new Chart(ctx, config);-->
<!--    };-->


<!--    </script>-->

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
     var data = google.visualization.arrayToDataTable({{ datas|safe }},true);
    //   var data= new google.visualization.DataTable();
    //   data.addColumn('string', 'Date');
    //   data.addColumn('number');
    //   data.addColumn('number');
    //   data.addColumn('number');
    //   data.addColumn('number');
    //   data.addColumn({type: 'string', role: 'style'});
    //   data.addRow( {{datas|safe}});
    
    var options = {
        tooltip: {isHtml: true},
      legend:'none',
        animation:{
          startup: true,
        duration: 1500,
        easing: 'out',
      },
        hAxis: {viewWindow: {min:0, max:100}},
        candlestick:{
          fallingColor:{
              fill: 'blue',
              stroke: 'blue',
          },
          risingColor:{
              fill: 'red',
              stroke: 'red',
          }
        },
        colors: ['black'],
    };

 var chart = new google.visualization.CandlestickChart(
        document.getElementById('chart_div'));
    var MAX = 100;
    var prevButton = document.getElementById('b1');
    var nextButton = document.getElementById('b2');
    var changeZoomButton = document.getElementById('b3');
    function drawChart() {
      // Disabling the button while the chart is drawing.
      prevButton.disabled = true;
      nextButton.disabled = true;
      changeZoomButton.disabled = true;
      google.visualization.events.addListener(chart, 'ready',
          function() {
            prevButton.disabled = options.hAxis.viewWindow.min <= 0;
            nextButton.disabled = options.hAxis.viewWindow.max >= MAX;
            changeZoomButton.disabled = false;
          });
      chart.draw(data, options);
    }

    prevButton.onclick = function() {
      if (zoomed==0) {
        options.hAxis.viewWindow.min -= 1;
        options.hAxis.viewWindow.max -= 1;
      }
      else if(zoomed==1){
          options.hAxis.viewWindow.min -= 5;
          options.hAxis.viewWindow.max -= 5;
      }
      else if(zoomed==2) {
        options.hAxis.viewWindow.min -= 10;
        options.hAxis.viewWindow.max -=10 ;
      }
      drawChart();
    }
    nextButton.onclick = function() {
      if (zoomed==0) {
        options.hAxis.viewWindow.min += 1;
        options.hAxis.viewWindow.max += 1;
      }
      else if(zoomed==1){
          options.hAxis.viewWindow.min += 5;
          options.hAxis.viewWindow.max += 5;
      }
      else if(zoomed==2) {
        options.hAxis.viewWindow.min += 10;
        options.hAxis.viewWindow.max +=10 ;
      }
      drawChart();
    }
    var zoomed = 0;
    changeZoomButton.onclick = function() {
      if (zoomed==0) {
        options.hAxis.viewWindow.min = 0;
        options.hAxis.viewWindow.max = 7;
      }
      else if(zoomed==1){
          options.hAxis.viewWindow.min=0;
          options.hAxis.viewWindow.max=20;
      }
      else if(zoomed==2) {
        options.hAxis.viewWindow.min = 0;
        options.hAxis.viewWindow.max = MAX;
      }
      zoomed = zoomed+1;
      if(zoomed >2)
          zoomed=0;
      drawChart();
    }
    drawChart();
  }
    </script>

     <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['table']});
      google.charts.setOnLoadCallback(drawTable);

      function drawTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', '거래일시');
        data.addColumn('string', '매수/매도');
        data.addColumn('string', 'win/loss');
        data.addColumn('string', '일 수익률');
        data.addColumn('string', '누적 수익률');
        data.addColumn('number', '총 자산');
        data.addRows([
          ['2019/05/15','sell','win','0.1%','2%',  {v: 10000, f: '$10,000'}],
          ['2019/05/15','sell','win','0.1%','2%',   {v:8000,   f: '$11,000'}],
          ['2019/05/15','sell','win','0.1%','2%', {v: 12500, f: '$11,500'}],
          ['2019/05/15','sell','win','0.1%','2%',   {v: 7000,  f: '$11,000'}]
        ]);

        var table = new google.visualization.Table(document.getElementById('table_div'));

        table.draw(data, {showRowNumber: true, width: '100%', height: '100%'});
      }
    </script>

</head>

<body id="page-top">


<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
    <div class="container">
        <img class="img" src="{% static 'garage/img/logo_box.png'%}" alt="" width="50" height="25">
        <a class="navbar-brand js-scroll-trigger" href="#page-top"><font size=4.5><B>&nbsp Algorithm Trading</B></font>
        </a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto my-2 my-lg-0">
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger" href="#about">소개</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger" href="#services">알고리즘 만들기</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger" href="#portfolio">알고리즘 관리</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger" href="#contact">마켓플레이스</a>
                </li>
                {% if user.is_authenticated %}
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger"> {{ user.username }} </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger" href="logout">로그아웃</a>
                </li>
                {% else %}
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger" href="login">로그인</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger" href="signup">회원가입</a>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>

<!-- graph -->

<section class="page-section bg-white" id="graph">
    <div class="container">

        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <h2 class="text-black
                     mt-0">업비트 BTC-KRW</h2>
                </div>
            </div>
        </div>


        <div class="row justify-content-center">
            <div id="container2" style="width: 100%; height:1000px">
                <div id="chart_div" style="width:100%; height:100%"></div>
            </div>
        </div>

        <div class="row justify-content-center">
            <button id="b1">prev</button>
            <div>    &nbsp</div>
             <button id="b2">next</button>
            <div>    &nbsp</div><div>    &nbsp</div>
             <button id="b3">zoom</button>
        </div>

    </div>

<!--    <div class="row justify-content-center" id="line-chart" ></div>-->
</section>




<!-- Services Section -->
<section class="page-section bg-secondary" id="profit">
    <div class="container">
            <div class="row justify-content-center">
                <div class="text-center">
                    <h2 class="text-white mt-0">수익률</h2>
                </div>
            </div>
    </div>

     <div class="row justify-content-center">
     <div id="table_div">
         </div>
     </div>

</section>






<!-- Bootstrap core JavaScript -->
{% load staticfiles %}
<script src="{% static 'garage/vendor/jquery/jquery.min.js'%}"></script>
<script src="{% static 'garage/vendor/bootstrap/js/bootstrap.bundle.min.js'%}"></script>

<!-- Plugin JavaScript -->
<script src="{% static 'garage/vendor/jquery-easing/jquery.easing.min.js'%}"></script>
<script src="{% static 'garage/vendor/magnific-popup/jquery.magnific-popup.min.js'%}"></script>

<!-- Custom scripts for this template -->
<script src="{% static 'garage/js/creative.min.js'%}"></script>


</body>

</html>



